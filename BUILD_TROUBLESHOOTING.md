# Решение проблем сборки SkimNote

## Проблемы и их решения

### 1. Ошибка кодировки UnicodeDecodeError

**Симптомы:**
```
UnicodeDecodeError: 'charmap' codec can't decode byte 0x98 in position 359
```

**Решение:**
- Используйте упрощенный скрипт сборки: `python build_installer_simple.py`
- Или закройте все программы, которые могут использовать файлы проекта

### 2. Файл занят другим процессом

**Симптомы:**
```
Процесс не может получить доступ к файлу, так как этот файл занят другим процессом
```

**Решение:**
1. Закройте все программы, которые могут использовать файлы проекта
2. Закройте проводник Windows в папке проекта
3. Перезапустите IDE или редактор кода
4. Запустите проверку файлов: `python check_files.py`

### 3. PyInstaller не найден

**Решение:**
```bash
pip install pyinstaller
```

### 4. Inno Setup не найден

**Решение:**
1. Скачайте Inno Setup с сайта: https://jrsoftware.org/isinfo.php
2. Установите его
3. Перезапустите командную строку

## Пошаговая инструкция сборки

### Вариант 1: Полная сборка (рекомендуется)
```bash
python build_installer.py
```

### Вариант 2: Упрощенная сборка (если есть проблемы с кодировкой)
```bash
python build_installer_simple.py
```

### Вариант 3: Пошаговая сборка
```bash
# 1. Сборка исполняемого файла
python build_exe.py

# 2. Создание установщика
"C:\Program Files (x86)\Inno Setup 6\ISCC.exe" installer.iss
```

## Проверка перед сборкой

Запустите проверку файлов:
```bash
python check_files.py
```

## Очистка временных файлов

```bash
# Удаление папок сборки
rmdir /s build
rmdir /s dist
rmdir /s __pycache__

# Удаление .spec файлов
del *.spec
```

## Структура файлов после сборки

```
SkimNote/
├── dist/
│   └── SkimNote.exe          # Исполняемый файл
├── installer/
│   └── SkimNote_Setup.exe    # Установщик
└── build/                    # Временные файлы (можно удалить)
```

## Частые вопросы

**Q: Почему сборка занимает много времени?**
A: PyInstaller анализирует все зависимости и создает автономный исполняемый файл. Это нормально.

**Q: Размер файла слишком большой**
A: Это нормально для PyQt6 приложений. PyInstaller включает все необходимые библиотеки.

**Q: Антивирус блокирует сборку**
A: Добавьте папку проекта в исключения антивируса или временно отключите его.

**Q: Ошибка "Access denied"**
A: Запустите командную строку от имени администратора.

## Поддержка

Если проблемы не решаются, попробуйте:
1. Перезагрузить компьютер
2. Использовать виртуальное окружение
3. Обновить Python и pip
4. Проверить права доступа к папке проекта 